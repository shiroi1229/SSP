# path: config/recovery_policies.yaml
# version: v2.6

recovery_policies:
  # Policies for system-level events, not tied to a specific module
  system:
    preemptive_repair:
      action: "auto_fix"
      condition: "mid_term.predicted_anomaly_probability > 0.7" # Trigger auto_fix if predicted anomaly probability > 0.7
      script: "optimize_resources.ps1" # Example script to run for preemptive optimization
      description: "Triggered by InsightMonitor when a future anomaly is predicted. Automatically runs an optimization script."
    high_cpu_usage:
      action: "auto_fix"
      condition: "short_term.system_health.cpu_percent > 80" # Example: Trigger auto_fix if CPU > 80%
      description: "If CPU usage is consistently high, trigger an auto-fix script."

  # Policies for the Evaluator module
  evaluator:
    evaluation_score_drop:
      action: "rollback"
      condition: "mid_term.evaluation_score < 0.4"
      description: "If the evaluation score drops significantly, roll back to the last stable context state."

    module_error:
      action: "retry"
      limit: 2
      description: "If the evaluator itself throws an error, retry its execution up to 2 times."

  # Policies for the PersonaManager module
  persona_manager:
    inconsistent_harmony:
      action: "recalibrate"
      condition: "abs(mid_term.persona_state.harmony - previous_harmony) > 0.5"
      baseline: "cautious"
      description: "If cognitive harmony shifts too drastically, recalibrate the persona to a more stable baseline."
